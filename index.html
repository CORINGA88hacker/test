<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PDF → Imagens (Dark Red iOS Style)</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- SweetAlert2 (tema escuro) -->
  <link href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@5/dark.min.css" rel="stylesheet" />

  <!-- Toastify CSS -->
  <link href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" rel="stylesheet" />

  <!-- Fonte iOS-like -->
  <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Text&display=swap" rel="stylesheet" />

  <style>
    body {
      font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
        Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background-color: #0a0a0a;
      color: #e6e6e6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      margin: 0;
    }
    header {
      background-color: #200008;
      box-shadow: 0 1px 5px rgba(217, 5, 80, 0.8);
      padding: 1.5rem 2rem;
      position: sticky;
      top: 0;
      z-index: 50;
      user-select: none;
    }
    header h1 {
      font-weight: 700;
      font-size: 1.9rem;
      letter-spacing: 0.04em;
      color: #e6e6e6;
      text-shadow: 0 0 6px #d90550cc;
      margin: 0;
    }
    main {
      flex-grow: 1;
      max-width: 960px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    #controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 1.5rem;
    }
    #controls > * {
      flex: 1 1 180px;
      max-width: 320px;
    }
    input[type="file"], select {
      background-color: #150004;
      border: 2px solid #d90550;
      border-radius: 12px;
      padding: 0.8rem 1rem;
      color: #e6e6e6;
      font-weight: 600;
      font-size: 1rem;
      transition: border-color 0.3s ease;
      outline-offset: 2px;
      cursor: pointer;
      user-select: none;
    }
    input[type="file"]:hover, select:hover {
      border-color: #a10030;
    }
    button {
      background: linear-gradient(135deg, #d90550, #700027);
      border-radius: 14px;
      border: none;
      color: #fff;
      font-weight: 700;
      font-size: 1.1rem;
      padding: 0.85rem 1.75rem;
      box-shadow: 0 4px 15px rgba(217, 5, 80, 0.8);
      cursor: pointer;
      transition: background 0.35s ease, box-shadow 0.35s ease;
      user-select: none;
    }
    button:hover:not(:disabled) {
      background: linear-gradient(135deg, #700027, #d90550);
      box-shadow: 0 6px 22px rgba(217, 5, 80, 1);
    }
    button:disabled {
      opacity: 0.4;
      cursor: default;
      box-shadow: none;
    }
    #info-area {
      text-align: center;
      margin-bottom: 1.5rem;
      color: #b0b0b0;
      font-weight: 600;
      letter-spacing: 0.03em;
      user-select: none;
    }
    #pdfs-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    }
    .canvas-wrapper {
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 6px 12px rgba(217,5,80,0.4);
      cursor: pointer;
      background-color: #1e000e;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      width: 140px;
      height: 210px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      user-select: none;
    }
    .canvas-wrapper:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 28px rgba(217,5,80,0.9);
      z-index: 20;
    }
    canvas {
      width: 140px !important;
      height: 210px !important;
      border-radius: 1rem;
      object-fit: contain;
      pointer-events: none;
      display: block;
      user-select: none;
    }
    /* Campo para renomear */
    .rename-input {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      background: #330013;
      color: #ffcad4;
      border: 1.5px solid #d90550;
      border-radius: 8px;
      padding: 4px 8px;
      font-weight: 600;
      font-size: 0.85rem;
      text-align: center;
      outline-offset: 2px;
      user-select: text;
      transition: background-color 0.25s ease;
      z-index: 30;
    }
    .rename-input:focus {
      background-color: #4a001f;
      border-color: #ff406c;
    }
    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.875rem;
      color: #a1a1a6;
      user-select: none;
      background-color: #150004;
      box-shadow: inset 0 1px 3px rgba(217,5,80,0.5);
      margin-top: 2rem;
    }

    /* Modal SweetAlert custom */
    .swal2-popup {
      background: #1e000e !important;
      color: #e6e6e6 !important;
      font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
        Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;
      border-radius: 20px !important;
      box-shadow: 0 0 28px rgba(217, 5, 80, 0.95) !important;
    }
    .swal2-title {
      color: #ff6f91 !important;
      font-weight: 800 !important;
      text-shadow: 0 0 6px #d90550cc !important;
    }
    .swal2-image {
      border-radius: 14px !important;
      box-shadow: 0 0 24px rgba(217, 5, 80, 0.9) !important;
    }
  </style>
</head>
<body>

<header>
  <h1>PDF → Imagens (Dark Red iOS Style)</h1>
</header>

<main>
  <div id="controls" aria-label="Controles para carregar PDF e baixar imagens">
    <input
      type="file"
      id="file-input"
      accept="application/pdf"
      multiple
      aria-describedby="fileHelp"
    />
    <select
      id="quality"
      aria-label="Qualidade das imagens"
      title="Qualidade das imagens"
    >
      <option value="1">Baixa</option>
      <option value="1.5" selected>Média</option>
      <option value="2">Alta</option>
      <option value="3">Ultra</option>
    </select>
    <button id="clear-btn" aria-label="Limpar arquivos" disabled>Limpar Tudo</button>
    <button id="download-zip" aria-label="Baixar imagens em zip" disabled>Baixar Tudo</button>
  </div>

  <div id="info-area" aria-live="polite" aria-atomic="true">
    <p id="pdf-name"></p>
    <p id="image-count"></p>
  </div>

  <div id="pdfs-container" role="list" aria-label="Imagens convertidas do PDF"></div>
</main>

<footer>
  &copy; 2025 maninho | Anime & Code vibes
</footer>

<!-- Bibliotecas JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

<script>
(() => {
  const fileInput = document.getElementById('file-input');
  const qualitySelect = document.getElementById('quality');
  const container = document.getElementById('pdfs-container');
  const downloadBtn = document.getElementById('download-zip');
  const clearBtn = document.getElementById('clear-btn');
  const pdfName = document.getElementById('pdf-name');
  const imageCount = document.getElementById('image-count');

  let allImages = [];

  function updateUI() {
    downloadBtn.disabled = allImages.length === 0;
    clearBtn.disabled = allImages.length === 0;
    imageCount.textContent = allImages.length
      ? `Imagens geradas: ${allImages.length}`
      : 'Nenhuma imagem carregada.';
  }

  function showToast(text, bg = "#d90550") {
    Toastify({
      text,
      duration: 3000,
      gravity: "top",
      position: "center",
      backgroundColor: bg,
      stopOnFocus: true,
    }).showToast();
  }

  function clearAll() {
    allImages = [];
    container.innerHTML = '';
    fileInput.value = '';
    pdfName.textContent = '';
    imageCount.textContent = '';
    updateUI();
  }

  async function processPDF(file) {
    const buffer = await file.arrayBuffer();
    const pdf = await pdfjsLib.getDocument({ data: buffer }).promise;
    return pdf;
  }

  // Faz as imagens aparecerem com fade + slide quando entram na viewport
  function observeImagesAnimation() {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1 }
    );

    document.querySelectorAll('.canvas-wrapper').forEach(el => {
      el.style.opacity = '0';
      el.style.transform = 'translateY(20px)';
      el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(el);
    });
  }

  fileInput.addEventListener('change', async (e) => {
    const files = Array.from(e.target.files);
    if (!files.length) return;

    clearAll();

    for (const file of files) {
      pdfName.textContent = `Carregado: ${file.name}`;
      showToast(`Processando: ${file.name}`);

      const pdf = await processPDF(file);
      const scale = parseFloat(qualitySelect.value);

      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const viewport = page.getViewport({ scale });
        const canvas = document.createElement('canvas');
        canvas.width = viewport.width;
        canvas.height = viewport.height;
        const ctx = canvas.getContext('2d');
        await page.render({ canvasContext: ctx, viewport }).promise;

        const wrapper = document.createElement('div');
        wrapper.className = 'canvas-wrapper';
        wrapper.setAttribute('role', 'listitem');

        // Canvas bloqueado para pointer events para input ficar clicável
        canvas.style.pointerEvents = 'none';

        // Campo renomear
        const renameInput = document.createElement('input');
        renameInput.type = 'text';
        renameInput.className = 'rename-input';
        renameInput.value = `pagina_${i}`;
        renameInput.title = "Clique para editar o nome";

        wrapper.appendChild(canvas);
        wrapper.appendChild(renameInput);
        container.appendChild(wrapper);

        allImages.push({ page: i, dataUrl: canvas.toDataURL('image/png'), name: renameInput.value });

        // Visualizar imagem grande com SweetAlert2
        wrapper.addEventListener('click', (ev) => {
          // Evita abrir modal se clicar no input de renomear
          if (ev.target === renameInput) return;

          const imgData = allImages.find(img => img.page === i)?.dataUrl;
          Swal.fire({
            imageUrl: imgData,
            imageAlt: `Página ${i}`,
            showCloseButton: true,
            showConfirmButton: false,
            background: '#200008',
            width: '80vw',
            padding: '1rem',
            customClass: { popup: 'rounded-xl shadow-lg' },
          });
        });

        renameInput.addEventListener('input', (evt) => {
          const index = allImages.findIndex(img => img.page === i);
          if (index !== -1) {
            allImages[index].name = evt.target.value.trim() || `pagina_${i}`;
          }
        });
      }
    }
    observeImagesAnimation();
    updateUI();
  });

  clearBtn.addEventListener('click', () => {
    clearAll();
    showToast('Tudo limpo! Pode carregar outro PDF.', '#660012');
  });

  downloadBtn.addEventListener('click', () => {
    if (!allImages.length) return;

    const zip = new JSZip();
    allImages.forEach(({ name, dataUrl }) => {
      const base64 = dataUrl.split(',')[1];
      let filename = name;
      if (!filename.toLowerCase().endsWith('.png')) filename += '.png';
      zip.file(filename, base64, { base64: true });
    });

    zip.generateAsync({ type: 'blob' }).then(blob => {
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'imagens_pdf.zip';
      a.click();
      URL.revokeObjectURL(a.href);
      showToast('Download iniciado!', '#28a745');
    });
  });

})();
</script>

</body>
</html>         faz melhoria aqui 
