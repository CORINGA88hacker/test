<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projeto Filmes</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <header>
    <h1>Projeto Filmes</h1>
    <nav>
      <a href="index.html">Início</a>
      <a href="catalogo.html">Catálogo</a>
    </nav>
  </header>

  <main>
    <section class="carrossel">
      <div class="slides">
        <img src="https://via.placeholder.com/900x400?text=Destaque+1" class="slide ativo" />
        <img src="https://via.placeholder.com/900x400?text=Destaque+2" class="slide" />
        <img src="https://via.placeholder.com/900x400?text=Destaque+3" class="slide" />
      </div>
    </section>

    <section class="secao">
      <h2>Novos Episódios</h2>
      <div class="grid" id="novos"></div>
    </section>

    <section class="secao">
      <h2>Lançamentos</h2>
      <div class="grid" id="lancamentos"></div>
    </section>

    <section class="secao">
      <h2>Filmes</h2>
      <div class="grid" id="filmes"></div>
    </section>

    <section class="secao">
      <h2>Animes</h2>
      <div class="grid" id="animes"></div>
    </section>

    <section class="secao">
      <h2>Recomendados</h2>
      <div class="grid" id="recomendados"></div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Projeto Filmes</p>
  </footer>

  <script>
    // Config Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBHIc2E4XwRO5FXo4uHlTQVRArOis73MjE",
      authDomain: "projeto-deus-yato-928.firebaseapp.com",
      projectId: "projeto-deus-yato-928",
      storageBucket: "projeto-deus-yato-928.appspot.com",
      messagingSenderId: "790408726854",
      appId: "1:790408726854:android:e2f0de7b7d5dba96b0fd47"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Slide automático
    let index = 0;
    const slides = document.querySelectorAll('.slide');
    setInterval(() => {
      slides.forEach(s => s.classList.remove('ativo'));
      slides[index].classList.add('ativo');
      index = (index + 1) % slides.length;
    }, 4000);

    // Carregar conteúdo do Firestore
    function carregarSecao(categoria, containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = '<p>Carregando...</p>';
      db.collection("conteudo").where("categoria", "==", categoria).limit(8).get()
        .then(snapshot => {
          container.innerHTML = '';
          if (snapshot.empty) {
            container.innerHTML = '<p>Nenhum conteúdo encontrado.</p>';
            return;
          }
          snapshot.forEach(doc => {
            const data = doc.data();
            container.innerHTML += `
              <div class="grid-item">
                <img src="${data.capa}" alt="${data.titulo}" />
                <p>${data.titulo}</p>
              </div>
            `;
          });
        })
        .catch(err => {
          container.innerHTML = '<p>Erro ao carregar dados.</p>';
          console.error(err);
        });
    }

    carregarSecao('episodio', 'novos');
    carregarSecao('lancamento', 'lancamentos');
    carregarSecao('filme', 'filmes');
    carregarSecao('anime', 'animes');
    carregarSecao('recomendado', 'recomendados');
  </script>
</body>
</html>
